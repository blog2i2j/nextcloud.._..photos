import{d as c}from"./index-C7x2K0nC.chunk.mjs";import{d as s,t}from"./vue.runtime.esm-DZVHDHac.chunk.mjs";import{i as d,c as n,n as l,P as u,r as p}from"./icons-CCMXs15V.chunk.mjs";import{N as i,l as h}from"./index-CtBKWcPT.chunk.mjs";import{g as m}from"./index-Db3ciQuZ.chunk.mjs";const f=s({name:"PhotosFolder",components:{NcButton:i,Folder:n,Close:d},props:{path:{type:String,required:!0},canDelete:{type:Boolean,default:!1},rootFolderLabel:{type:String,required:!0},rootFolderIcon:{type:Object,required:!0}},emits:["remove-folder"],computed:{folderName(){return this.path==="/"?this.rootFolderLabel:this.path.split("/").pop()},subname(){switch((this.path.match(/\//g)??[]).length){case 1:return"";case 2:return this.path.split("/").splice(0,2).join("/");default:return this.path.split("/").splice(0,3).join("/")}}},methods:{emitRemoveSourceFolder(){this.$emit("remove-folder")},t}});var F=function(){var e=this,o=e._self._c;return e._self._setupProxy,o("div",{staticClass:"folder"},[e.path==="/"?o(e.rootFolderIcon,{tag:"component"}):o("Folder"),o("span",{staticClass:"folder__info"},[o("div",{staticClass:"folder__path"},[e._v(e._s(e.folderName))]),e.subname!==""?o("div",[e._v(" "+e._s(e.subname)+" ")]):e._e()]),e.canDelete?o("NcButton",{attrs:{type:"tertiary","aria-label":e.t("photos","Delete source directory")},on:{click:e.emitRemoveSourceFolder},scopedSlots:e._u([{key:"icon",fn:function(){return[o("Close",{attrs:{size:20}})]},proxy:!0}],null,!1,2121748766)}):e._e()],1)},S=[],_=l(f,F,S,!1,null,"bee8917d");const v=_.exports,y=s({name:"PhotosSourceLocationsSettings",components:{NcButton:i,PhotosFolder:v,Plus:u},data(){return{FolderMultiple:p}},computed:{photosSourceFolders(){return this.$store.state.userConfig.photosSourceFolders}},methods:{debounceAddSourceFolder:c(function(...e){this.addSourceFolder(...e)},200,{immediate:!1}),async openFilePicker(e){return m(e).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").allowDirectories().addButton({label:t("photos","Pick folder"),callback:o=>h.debug("Picked",{nodes:o})}).build().pick()},async addSourceFolder(){const e=await this.openFilePicker(t("photos","Select a source folder for your media"));this.photosSourceFolders.includes(e)||this.$store.dispatch("updateUserConfig",{key:"photosSourceFolders",value:[...this.photosSourceFolders,e]})},removeSourceFolder(e){const o=[...this.photosSourceFolders];o.splice(e,1),this.$store.dispatch("updateUserConfig",{key:"photosSourceFolders",value:o})},t}});var b=function(){var e=this,o=e._self._c;return e._self._setupProxy,o("div",{staticClass:"photos-locations-container"},[o("div",{staticClass:"photos-locations"},e._l(e.photosSourceFolders,function(a,r){return o("li",{key:r},[o("PhotosFolder",{attrs:{path:a,"can-delete":e.photosSourceFolders.length!==1,"root-folder-label":e.t("photos","All folders"),"root-folder-icon":e.FolderMultiple},on:{"remove-folder":function(g){return e.removeSourceFolder(r)}}})],1)}),0),o("NcButton",{attrs:{"aria-label":e.t("photos","Add a Photos source for the timelines")},on:{click:e.debounceAddSourceFolder},scopedSlots:e._u([{key:"icon",fn:function(){return[o("Plus",{attrs:{size:20}})]},proxy:!0}])},[e._v(" "+e._s(e.t("photos","Add folder"))+" ")])],1)},P=[],k=l(y,b,P,!1,null,"813e4528");const $=k.exports;export{v as P,$ as a};
//# sourceMappingURL=PhotosSourceLocationsSettings-BGrSeoxo.chunk.mjs.map
