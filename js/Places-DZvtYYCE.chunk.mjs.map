{"version":3,"file":"Places-DZvtYYCE.chunk.mjs","sources":["../src/views/Places.vue"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div>\n\t\t<CollectionsList :collections=\"places\"\n\t\t\t:loading=\"loadingCollections\"\n\t\t\t:error=\"errorFetchingCollections\"\n\t\t\tclass=\"places-list\">\n\t\t\t<HeaderNavigation key=\"navigation\"\n\t\t\t\tslot=\"header\"\n\t\t\t\t:loading=\"loadingCollections\"\n\t\t\t\t:title=\"t('photos', 'Places')\"\n\t\t\t\t:root-title=\"t('photos', 'Places')\"\n\t\t\t\t@refresh=\"fetchPlaces\" />\n\n\t\t\t<CollectionCover :key=\"collection.basename\"\n\t\t\t\tslot-scope=\"{collection}\"\n\t\t\t\t:link=\"`/places/${collection.basename}`\"\n\t\t\t\t:alt-img=\"t('photos', 'Cover photo for place {placeName}', { placeName: collection.basename })\"\n\t\t\t\t:cover-url=\"collection.attributes['last-photo'] | coverUrl\">\n\t\t\t\t<span class=\"place__name\">\n\t\t\t\t\t{{ collection.basename }}\n\t\t\t\t</span>\n\n\t\t\t\t<div slot=\"subtitle\" class=\"place__details\">\n\t\t\t\t\t{{ n('photos', '%n item', '%n photos and videos', collection.attributes.nbItems,) }}\n\t\t\t\t</div>\n\t\t\t</CollectionCover>\n\n\t\t\t<NcEmptyContent slot=\"empty-collections-list\" :name=\"t('photos', 'There is no place yet!')\">\n\t\t\t\t<FolderMultipleImage slot=\"icon\" />\n\t\t\t</NcEmptyContent>\n\t\t</CollectionsList>\n\t</div>\n</template>\n\n<script lang='ts'>\n\nimport FolderMultipleImage from 'vue-material-design-icons/FolderMultipleImage.vue'\n\nimport { generateUrl } from '@nextcloud/router'\nimport NcEmptyContent from '@nextcloud/vue/dist/Components/NcEmptyContent.js'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { translate, translatePlural } from '@nextcloud/l10n'\n\nimport FetchCollectionsMixin from '../mixins/FetchCollectionsMixin.js'\nimport CollectionsList from '../components/Collection/CollectionsList.vue'\nimport CollectionCover from '../components/Collection/CollectionCover.vue'\nimport HeaderNavigation from '../components/HeaderNavigation.vue'\nimport type { Collection } from '../services/collectionFetcher.js'\n\nexport default {\n\tname: 'Places',\n\tcomponents: {\n\t\tFolderMultipleImage,\n\t\tNcEmptyContent,\n\t\tCollectionsList,\n\t\tCollectionCover,\n\t\tHeaderNavigation,\n\t},\n\n\tfilters: {\n\t\t/**\n\t\t * @param {string} fileId The place's last photo.\n\t\t */\n\t\tcoverUrl(fileId) {\n\t\t\tif (fileId === -1) {\n\t\t\t\treturn ''\n\t\t\t}\n\n\t\t\treturn generateUrl(`/apps/photos/api/v1/preview/${fileId}?x=${512}&y=${512}`)\n\t\t},\n\t},\n\n\tmixins: [\n\t\tFetchCollectionsMixin,\n\t],\n\n\tcomputed: {\n\t\tplaces(): Record<string, Collection> {\n\t\t\treturn this.$store.getters.places\n\t\t},\n\t},\n\n\tasync beforeMount() {\n\t\tthis.fetchPlaces()\n\t},\n\n\tmethods: {\n\t\tfetchPlaces() {\n\t\t\tthis.fetchCollections(`/photos/${getCurrentUser()?.uid}/places`)\n\t\t},\n\n\t\tt: translate,\n\t\tn: translatePlural,\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.places-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t.place__name {\n\t\tfont-weight: normal;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\tfont-size: 20px;\n\t\tmargin-bottom: 12px;\n\t\tline-height: 30px;\n\t\tcolor: var(--color-main-text);\n\t}\n}\n</style>\n"],"names":["_sfc_main","FolderMultipleImage","NcEmptyContent","CollectionsList","CollectionCover","HeaderNavigation","fileId","generateUrl","FetchCollectionsMixin","getCurrentUser","translate","translatePlural"],"mappings":"4hBAqDA,MAAAA,EAAA,CACA,KAAA,SACA,WAAA,CACA,oBAAAC,EACA,eAAAC,EACA,gBAAAC,EACA,gBAAAC,EACA,iBAAAC,CACA,EAEA,QAAA,CAIA,SAAAC,EAAA,CACA,OAAAA,IAAA,GACA,GAGAC,EAAA,+BAAAD,CAAA,cAAA,CAAA,CAEA,EAEA,OAAA,CACAE,CACA,EAEA,SAAA,CACA,QAAA,CACA,OAAA,KAAA,OAAA,QAAA,MAAA,CAEA,EAEA,MAAA,aAAA,CACA,KAAA,YAAA,CACA,EAEA,QAAA,CACA,aAAA,CACA,KAAA,iBAAA,WAAAC,EAAA,GAAA,GAAA,SAAA,CACA,EAEA,EAAAC,EACA,EAAAC,CAAA,CAEA"}