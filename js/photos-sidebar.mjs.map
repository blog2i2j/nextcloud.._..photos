{"version":3,"mappings":";sIAAA,MAAeA,EAAA,sTCUfC,EAAI,UAAU,EAAIC,EAClBD,EAAI,UAAU,EAAIE,EAElBC,EAAoB,yBAAyB,EAC7CA,EAAoB,yBAAyB,EAC7CA,EAAoB,wBAAwB,EAC5CA,EAAoB,0BAA0B,EAG9C,IAAIC,EAAgB,KAChBC,EAAoB,KACxB,MAAMC,EAAY,IAAI,IAAI,MAAM,QAAQ,IAAI,CAC3C,GAAI,SACJ,KAAML,EAAE,SAAU,SAAS,EAC3B,QAASF,EAET,MAAM,MAAMQ,EAAIC,EAAUC,EAAS,CAElC,GAAIL,IAAkB,KAAM,CAC3B,KAAM,CAAE,QAASM,CAAA,EAAc,MAAMC,EAAA,wBAAAD,CAAA,eAAO,gCAAuB,iBAAAA,CAAA,iDACnDN,KAAiBJ,EAAI,OAAOU,CAAS,EAGlDL,GACHA,EAAkB,SAAS,EAE5BA,EAAoB,IAAID,EAAc,CAErC,OAAQK,CAAA,CACR,EAEDJ,EAAkB,OAAOG,CAAQ,EACjCH,EAAkB,OAAOE,CAAE,CAC5B,EACA,OAAOC,EAAU,CAChBH,EAAkB,OAAOG,CAAQ,CAClC,EACA,SAAU,CACTH,EAAkB,SAAS,EACPA,EAAA,KAEtB,CAAC,EAED,OAAO,iBAAiB,mBAAoB,gBAAiB,CAC5D,GAAI,IAAI,OAAS,IAAI,MAAM,QAAS,CACnC,OAAO,IAAI,MAAM,QAAQ,YAAYC,CAAS,EAC9C,KAAM,CAAE,QAASI,CAAU,EAAI,wCAAwC,wCAAuB,iBAAAA,CAAA,iDAC9EN,KAAiBJ,EAAI,OAAOU,CAAS,EAOtD,SAASE,EAAmBC,EAAe,CAC1C,OAAOA,GAAe,OAAO,CAACC,EAAaC,KAAc,CAAE,GAAGD,EAAa,CAACC,EAAS,QAAQ,EAAGA,EAAS,WAAY,GAAI,EAAE,EAG5H,GAAG,MAAM,UAAY,oBAAkB,SAASC,EAAU,CAClD,OACN,qCAAsCA,EAAS,SAAS,CAAC,EAAE,WAAW,IAAI,GAAG,MAAM,OAAO,YAAY,qCAAqC,EAC3I,uBAAwBJ,EAAmBI,EAAS,SAAS,CAAC,EAAE,WAAW,IAAI,GAAG,MAAM,OAAO,YAAY,uBAAuB,CAAC,EACnI,uBAAwBJ,EAAmBI,EAAS,SAAS,CAAC,EAAE,WAAW,IAAI,GAAG,MAAM,OAAO,YAAY,uBAAuB,CAAC,EACnI,sBAAuBJ,EAAmBI,EAAS,SAAS,CAAC,EAAE,WAAW,IAAI,GAAG,MAAM,OAAO,YAAY,sBAAsB,CAAC,EACjI,wBAAyBA,EAAS,SAAS,CAAC,EAAE,WAAW,IAAI,GAAG,MAAM,OAAO,YAAY,wBAAwB,CAClH,EACA,CACF,CAAC","names":["InformationOutline","Vue","t","n","registerDavProperty","PhotosTabView","PhotosTabInstance","photosTab","el","fileInfo","context","PhotosTab","__vitePreload","parseMetadataArray","metadataArray","parsedArray","metadata","response"],"ignoreList":[0],"sources":["../node_modules/@mdi/svg/svg/information-outline.svg?raw","../src/sidebar.ts"],"sourcesContent":["export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"mdi-information-outline\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z\\\" /></svg>\"","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport Vue from 'vue'\n// eslint-disable-next-line n/no-missing-import, import/no-unresolved\nimport InformationOutline from '@mdi/svg/svg/information-outline.svg?raw'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\nimport { registerDavProperty } from '@nextcloud/files/dav'\n\nVue.prototype.t = t\nVue.prototype.n = n\n\nregisterDavProperty('nc:metadata-photos-exif')\nregisterDavProperty('nc:metadata-photos-ifd0')\nregisterDavProperty('nc:metadata-photos-gps')\nregisterDavProperty('nc:metadata-photos-place')\n\n// Init Photos tab component\nlet PhotosTabView = null\nlet PhotosTabInstance = null\nconst photosTab = new OCA.Files.Sidebar.Tab({\n\tid: 'photos',\n\tname: t('photos', 'Details'),\n\ticonSvg: InformationOutline,\n\n\tasync mount(el, fileInfo, context) {\n\t\t// only load if needed\n\t\tif (PhotosTabView === null) {\n\t\t\tconst { default: PhotosTab } = await import('./views/PhotosTab.vue')\n\t\t\tPhotosTabView = PhotosTabView ?? Vue.extend(PhotosTab)\n\t\t}\n\t\t// destroy previous instance if available\n\t\tif (PhotosTabInstance) {\n\t\t\tPhotosTabInstance.$destroy()\n\t\t}\n\t\tPhotosTabInstance = new PhotosTabView({\n\t\t\t// Better integration with vue parent component\n\t\t\tparent: context,\n\t\t})\n\t\t// No need to await this, we will show a loading indicator instead\n\t\tPhotosTabInstance.update(fileInfo)\n\t\tPhotosTabInstance.$mount(el)\n\t},\n\tupdate(fileInfo) {\n\t\tPhotosTabInstance.update(fileInfo)\n\t},\n\tdestroy() {\n\t\tPhotosTabInstance.$destroy()\n\t\tPhotosTabInstance = null\n\t},\n})\n\nwindow.addEventListener('DOMContentLoaded', async function() {\n\tif (OCA.Files && OCA.Files.Sidebar) {\n\t\twindow.OCA.Files.Sidebar.registerTab(photosTab)\n\t\tconst { default: PhotosTab } = await import(/* webpackPreload: true */ './views/PhotosTab.vue')\n\t\tPhotosTabView = PhotosTabView ?? Vue.extend(PhotosTab)\n\t}\n\n\t/**\n\t *\n\t * @param metadataArray\n\t */\n\tfunction parseMetadataArray(metadataArray) {\n\t\treturn metadataArray?.reduce((parsedArray, metadata) => ({ ...parsedArray, [metadata.nodeName]: metadata.textContent }), {})\n\t}\n\n\tOC.Files.getClient().addFileInfoParser(function(response) {\n\t\treturn {\n\t\t\t'metadata-photos-original_date_time': response.propStat[0].properties[`{${OC.Files.Client.NS_NEXTCLOUD}}metadata-photos-original_date_time`],\n\t\t\t'metadata-photos-exif': parseMetadataArray(response.propStat[0].properties[`{${OC.Files.Client.NS_NEXTCLOUD}}metadata-photos-exif`]),\n\t\t\t'metadata-photos-ifd0': parseMetadataArray(response.propStat[0].properties[`{${OC.Files.Client.NS_NEXTCLOUD}}metadata-photos-ifd0`]),\n\t\t\t'metadata-photos-gps': parseMetadataArray(response.propStat[0].properties[`{${OC.Files.Client.NS_NEXTCLOUD}}metadata-photos-gps`]),\n\t\t\t'metadata-photos-place': response.propStat[0].properties[`{${OC.Files.Client.NS_NEXTCLOUD}}metadata-photos-place`],\n\t\t}\n\t})\n})\n"],"file":"js/photos-sidebar.mjs"}