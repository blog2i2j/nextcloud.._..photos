import{Q as ne,R as ie,W as re,X as de,Y as pe,Z as ue,$ as he,a0 as me,a1 as fe,a2 as ve,a3 as ge,a4 as Ce,a5 as _e,a6 as ye,a7 as Pe,a8 as Fe,a9 as Ne,g as $,h as $e,t as B,i as E,_ as be,k as xe,b as Ie}from"./vendor-DOPpmdjb.chunk.mjs";import{F as Me,I as we,P as ke}from"./icons-Ba8uv1cK.chunk.mjs";import"./photos-sidebar.mjs";import"./tags-C9uqs7-N.chunk.mjs";import{b as Se,H as O,C as Ae,c as He,n as z,F as Te,f as je}from"./photos-main.mjs";const Ke="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%3e%3cdefs%3e%3clinearGradient%20id='placeholder__gradient'%3e%3cstop%20offset='0%25'%20stop-color='%23ededed'%3e%3canimate%20attributeName='stop-color'%20values='%23ededed;%20%23ededed;%20%23cccccc;%20%23cccccc;%20%23ededed'%20dur='2s'%20repeatCount='indefinite'/%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23cccccc'%3e%3canimate%20attributeName='stop-color'%20values='%23cccccc;%20%23ededed;%20%23ededed;%20%23cccccc;%20%23cccccc'%20dur='2s'%20repeatCount='indefinite'/%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";var T={},j;function Ve(){if(j)return T;j=1;var e=ne(),t=ie(),o=re(),n=de(),G=ve(),L=ye(),U=Pe(),W=Ce(),Q=Ne(),R=Fe(),r=pe(),X=ge(),Y=ue(),Z=_e(),q=he(),D=me(),J=fe(),m=J("replace"),K=Math.max,V=Math.min,ee=o([].concat),f=o([].push),b=o("".indexOf),x=o("".slice),te=function(i){return i===void 0?i:String(i)},oe=function(){return"a".replace(/./,"$0")==="$0"}(),I=function(){return/./[m]?/./[m]("a","$0")==="":!1}(),ae=!G(function(){var i=/./;return i.exec=function(){var p=[];return p.groups={a:"7"},p},"".replace(i,"$<a>")!=="7"});return n("replace",function(i,p,le){var se=I?"$":"$0";return[function(d,a){var s=X(this),l=W(d)?void 0:Z(d,m);return l?t(l,d,s,a):t(p,r(s),d,a)},function(d,a){var s=L(this),l=r(d);if(typeof a=="string"&&b(a,se)===-1&&b(a,"$<")===-1){var M=le(p,s,l,a);if(M.done)return M.value}var w=U(a);w||(a=r(a));var k=s.global,S;k&&(S=s.unicode,s.lastIndex=0);for(var v=[],c;c=D(s,l),!(c===null||(f(v,c),!k));){var ce=r(c[0]);ce===""&&(s.lastIndex=Y(l,R(s.lastIndex),S))}for(var A="",h=0,g=0;g<v.length;g++){c=v[g];for(var C=r(c[0]),u=K(V(Q(c.index),l.length),0),_=[],y,P=1;P<c.length;P++)f(_,te(c[P]));var F=c.groups;if(w){var H=ee([C],_,u,l);F!==void 0&&f(H,F),y=r(e(a,void 0,H))}else y=q(C,l,u,_,F,a);u>=h&&(A+=x(l,h,u)+y,h=u+C.length)}return A+x(l,h)}]},!ae||!oe||I),T}const N=`/photos/${$()?.uid}/places/`,Be={places:(e,t,o,n)=>n.collectionsWithPrefix(N),getPlace:(e,t,o)=>n=>o.collections.collections[`${N}${n}`]||null,getPlaceFiles:(e,t,o)=>n=>o.collections.collectionsFiles[`${N}${n}`]||[]},et={getters:Be},Ee={name:"Places",components:{FolderMultipleImage:Me,NcEmptyContent:E,CollectionsList:He,CollectionCover:Ae,HeaderNavigation:O},filters:{coverUrl(e){return e===-1?"":be(`/apps/photos/api/v1/preview/${e}?x=512&y=512`)}},mixins:[Se],computed:{places(){return this.$store.getters.places}},async beforeMount(){this.fetchPlaces()},methods:{fetchPlaces(){this.fetchCollections(`/photos/${$()?.uid}/places`)},t:B,n:$e}};var Oe=function(){var e=this,t=e._self._c;return t("div",[t("CollectionsList",{staticClass:"places-list",attrs:{collections:e.places,loading:e.loadingCollections,error:e.errorFetchingCollections},scopedSlots:e._u([{key:"default",fn:function({collection:o}){return t("CollectionCover",{key:o.basename,attrs:{link:`/places/${o.basename}`,"alt-img":e.t("photos","Cover photo for place {placeName}",{placeName:o.basename}),"cover-url":e._f("coverUrl")(o.lastPhoto)}},[t("span",{staticClass:"place__name"},[e._v(" "+e._s(o.basename)+" ")]),t("div",{staticClass:"place__details",attrs:{slot:"subtitle"},slot:"subtitle"},[e._v(" "+e._s(e.n("photos","%n item","%n photos and videos",o.nbItems))+" ")])])}}])},[t("HeaderNavigation",{key:"navigation",attrs:{slot:"header",loading:e.loadingCollections,title:e.t("photos","Places"),"root-title":e.t("photos","Places")},on:{refresh:e.fetchPlaces},slot:"header"}),t("NcEmptyContent",{attrs:{slot:"empty-collections-list",name:e.t("photos","There is no place yet!")},slot:"empty-collections-list"},[t("FolderMultipleImage",{attrs:{slot:"icon"},slot:"icon"})],1)],1)],1)},ze=[],Ge=z(Ee,Oe,ze,!1,null,"9d4f32d6");const Le=Ge.exports,tt=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"})),Ue={name:"PlaceContent",components:{Plus:ke,ImagePlus:we,NcEmptyContent:E,NcButton:Ie,CollectionContent:je,HeaderNavigation:O},mixins:[Te,xe],props:{placeName:{type:String,default:"/"}},data(){return{showAddPhotosModal:!1,loadingCollection:!1,errorFetchingCollection:null,loadingCount:0,loadingAddFilesToPlace:!1}},computed:{place(){return this.$store.getters.getPlace(this.placeName)},placeFileName(){return`/photos/${$()?.uid}/places/${this.placeName}`},placeFileIds(){return this.$store.getters.getPlaceFiles(this.placeName)}},async beforeMount(){await this.fetchPlace(),await this.fetchPlaceFiles()},methods:{async fetchPlace(){this.fetchCollection(this.placeFileName)},async fetchPlaceFiles(){this.fetchCollectionFiles(this.placeFileName)},t:B}};var We=function(){var e=this,t=e._self._c;return t("div",[t("CollectionContent",{ref:"collectionContent",attrs:{collection:e.place,"collection-file-ids":e.placeFileIds,"allow-selection":!1,loading:e.loadingCollection||e.loadingCollectionFiles,error:e.errorFetchingCollection||e.errorFetchingCollectionFiles}},[e.place!==null?t("HeaderNavigation",{key:"navigation",attrs:{slot:"header",loading:e.loadingCollection||e.loadingCollectionFiles,params:{placeName:e.placeName},path:"/"+e.placeName,title:e.place.basename},on:{refresh:e.fetchPlaceFiles},slot:"header"}):e._e(),t("NcEmptyContent",{staticClass:"place__empty",attrs:{slot:"empty-content",name:e.t("photos","This place does not have any photos or videos yet!")},slot:"empty-content"},[t("ImagePlus",{attrs:{slot:"icon"},slot:"icon"}),t("NcButton",{attrs:{slot:"action",type:"primary","aria-label":e.t("photos","Add photos to this place")},on:{click:function(o){e.showAddPhotosModal=!0}},slot:"action"},[t("Plus",{attrs:{slot:"icon"},slot:"icon"}),e._v(" "+e._s(e.t("photos","Add"))+" ")],1)],1)],1)],1)},Qe=[],Re=z(Ue,We,Qe,!1,null,"0e3cdb95");const Xe=Re.exports,ot=Object.freeze(Object.defineProperty({__proto__:null,default:Xe},Symbol.toStringTag,{value:"Module"}));export{tt as P,ot as a,et as p,Ve as r,Ke as s};
//# sourceMappingURL=places-AlGOFB75.chunk.mjs.map
